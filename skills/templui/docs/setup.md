# templui Setup in a Forge App

This guide covers setting up templui in a Forge app **after** `forge-init` has scaffolded the project.

## What forge-init Already Did

- Added `templ` and `templui` CLIs to `go.mod` tool directive
- Created `assets/` directory with `embed.go`, `static/css/`, `static/js/`, `static/img/`
- Configured `.air.toml` to watch `.templ` files and run `go tool templ generate`
- Set up `Taskfile.yml` with `templ:generate` and `assets:download` tasks
- Vendored HTMX and Alpine as `htmx.min.js` / `alpine.min.js` in `assets/static/js/`
- Added Tailwind browser CDN as `tailwind.min.js` in `assets/static/js/`
- Configured `forge.WithStaticFiles()` in `main.go` for serving assets

## What You Still Need to Do

forge-init does NOT create any `.templ` files, templui config, or theme CSS. This guide covers those steps.

## Step 1: Initialize templui

Run from the project root:

```bash
go tool templui init
```

This creates `.templui.json` with interactive prompts. Use these recommended values for Forge apps:

```json
{
  "componentsDir": "components",
  "utilsDir": "utils",
  "moduleName": "<your-module-from-go.mod>",
  "jsDir": "assets/static/js",
  "jsPublicPath": "/static/js"
}
```

**Why these values:**

- `componentsDir: "components"` — top-level, clean imports (`"myapp/components/button"`)
- `utilsDir: "utils"` — shared utilities like `TwMerge()` live here
- `jsDir: "assets/static/js"` — aligns with forge-init's asset directory structure
- `jsPublicPath: "/static/js"` — matches `forge.WithStaticFiles("/static/", ...)` serving path

## Step 2: Add Components

Install individual components (auto-installs dependencies):

```bash
go tool templui add button card dialog input form label toast
```

List all available components:

```bash
go tool templui list
```

## Step 3: Set Up Theme CSS

Create `assets/css/input.css` for templui theme variables. See `theme.md` for the full file content and CSS variable reference.

This is needed because:

- forge-init uses the Tailwind browser CDN (great for dev, no custom CSS support)
- templui components rely on CSS custom properties (`--background`, `--primary`, etc.) for theming
- Production apps need a proper Tailwind CLI build process

## Step 4: Create Base Layout

Create a base layout template that includes Script() tags for your components. See `js-integration.md` for the full dependency chain and base layout example.

Minimal example at `templates/layouts/base.templ`:

```go
package layouts

import (
    "myapp/components/toast"
)

templ Base(title string) {
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="UTF-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
            <title>{ title }</title>
            <link rel="stylesheet" href="/static/css/output.css"/>
            <script src="/static/js/htmx.min.js"></script>
            <script src="/static/js/alpine.min.js" defer></script>
            @toast.Script()
            // Add more Script() tags as needed
        </head>
        <body class="min-h-screen bg-background text-foreground">
            { children... }
        </body>
    </html>
}
```

## Common CLI Commands

```bash
# Add a single component
go tool templui add button

# Add multiple components at once
go tool templui add button card dialog input form

# Update a single component (overwrites local changes)
go tool templui add button

# Update ALL installed components
go tool templui --installed add

# List available components
go tool templui list

# Upgrade templui CLI and utils
go tool templui upgrade
```

**Note:** Always use `go tool templui` (not bare `templui`) since it's installed via the `go.mod` tool directive.

## Project Structure After Setup

```
myapp/
├── assets/
│   ├── css/
│   │   └── input.css          ← theme CSS (you create this)
│   ├── embed.go               ← forge-init created
│   └── static/
│       ├── css/
│       │   └── output.css     ← Tailwind CLI output (generated)
│       ├── js/
│       │   ├── htmx.min.js    ← forge-init vendored
│       │   ├── alpine.min.js  ← forge-init vendored
│       │   └── *.min.js       ← templui component JS (auto-installed)
│       └── img/
├── components/                 ← templui components (generated by `templui add`)
│   ├── button/
│   │   └── button.templ
│   ├── card/
│   │   └── card.templ
│   └── ...
├── utils/                      ← templui shared utilities
│   └── utils.go
├── templates/                  ← your app templates
│   ├── layouts/
│   │   └── base.templ
│   └── pages/
│       └── home.templ
├── .templui.json               ← templui config
├── go.mod
└── Taskfile.yml
```
