# Popover

> A floating overlay panel anchored to a trigger element, with configurable placement, hover/click/manual activation, click-away dismiss, arrow indicator, and Floating UI-based positioning.

## Install

```bash
templui add popover
```

Dependencies auto-installed: none

Add to your base layout `<head>`: `@popover.Script()`

## Update

```bash
templui add popover
```

To update all: `templui --installed add`

## API

### Enums

```go
type Placement string

const (
	PlacementTop         Placement = "top"
	PlacementTopStart    Placement = "top-start"
	PlacementTopEnd      Placement = "top-end"
	PlacementRight       Placement = "right"
	PlacementRightStart  Placement = "right-start"
	PlacementRightEnd    Placement = "right-end"
	PlacementBottom      Placement = "bottom"
	PlacementBottomStart Placement = "bottom-start"
	PlacementBottomEnd   Placement = "bottom-end"
	PlacementLeft        Placement = "left"
	PlacementLeftStart   Placement = "left-start"
	PlacementLeftEnd     Placement = "left-end"
)

type TriggerType string

const (
	TriggerTypeHover  TriggerType = "hover"
	TriggerTypeClick  TriggerType = "click"
	TriggerTypeManual TriggerType = "manual"
)
```

### Props

```go
type TriggerProps struct {
	ID          string
	Class       string
	Attributes  templ.Attributes
	For         string
	TriggerType TriggerType
}

type ContentProps struct {
	ID               string
	Class            string
	Attributes       templ.Attributes
	Placement        Placement
	Offset           int
	DisableClickAway bool
	DisableESC       bool
	ShowArrow        bool
	HoverDelay       int
	HoverOutDelay    int
	MatchWidth       bool
	Exclusive        bool
}
```

## Components

| Function | Props | Description |
| -------- | ----- | ----------- |
| `Trigger(props ...TriggerProps)` | `TriggerProps` | The element that activates the popover. Wraps children in a `<span>`. Use `For` to link to a `Content` by its `ID`. Defaults to `TriggerTypeClick`. |
| `Content(props ...ContentProps)` | `ContentProps` | The floating popup body. Rendered as a `<div>` positioned by Floating UI. `ID` is required to link with `Trigger.For`. Defaults to `PlacementBottom`. Offset defaults to 8 when `ShowArrow` is true, 4 otherwise. |
| `Script()` | — | Outputs the `<script>` tag for popover JS (includes Floating UI). Auto-generated by `templui add`. Place once in `<head>`. |

## Composition

```
Trigger  (activator element, linked by `For`)
Content  (floating popup body, linked by `ID`)
```

`Trigger.For` must match `Content.ID` to associate them. They do not need to be adjacent siblings or share a wrapper.

## Dependencies

None — only uses `utils` package.

## Context

No context passing.

## Data Attributes

| Attribute | Element | Description |
| --------- | ------- | ----------- |
| `data-tui-popover-trigger` | Trigger `<span>` | The ID of the linked `Content`. Set from `TriggerProps.For`. |
| `data-tui-popover-open` | Trigger and Content | `"true"` when the popover is open, `"false"` when closed. |
| `data-tui-popover-type` | Trigger `<span>` | The trigger activation type: `"hover"`, `"click"`, or `"manual"`. |
| `data-tui-popover-id` | Content `<div>` | The popover content ID, mirrors the element `id`. |
| `data-tui-popover-placement` | Content `<div>` | Desired placement string (e.g. `"bottom"`, `"top-start"`). |
| `data-tui-popover-offset` | Content `<div>` | Pixel offset from the trigger. |
| `data-tui-popover-disable-clickaway` | Content `<div>` | `"true"` disables closing on outside click. |
| `data-tui-popover-disable-esc` | Content `<div>` | `"true"` disables closing on Escape key. |
| `data-tui-popover-show-arrow` | Content `<div>` | `"true"` when the arrow indicator is rendered. |
| `data-tui-popover-hover-delay` | Content `<div>` | Milliseconds before opening on hover. |
| `data-tui-popover-hover-out-delay` | Content `<div>` | Milliseconds before closing after hover leaves. |
| `data-tui-popover-exclusive` | Content `<div>` | `"true"` closes other exclusive popovers when this one opens. |
| `data-tui-popover-match-width` | Content `<div>` | `"true"` matches the content width to the trigger width (via `--popover-trigger-width` CSS variable). |
| `data-tui-popover-arrow` | Arrow `<div>` | Marks the arrow element inside Content for Floating UI positioning. |
| `data-tui-popover-portal-container` | Portal `<div>` | Auto-created portal container at `document.body` for rendering popovers at the top level. |

## JavaScript API

The popover JS exposes a public API on `window.tui.popover`:

| Method | Signature | Description |
| ------ | --------- | ----------- |
| `open` | `open(id: string)` | Opens the popover with the given content ID. |
| `close` | `close(id: string, immediate?: boolean)` | Closes the popover. Pass `true` for `immediate` to skip the close animation. |
| `closeAll` | `closeAll(exceptId?: string)` | Closes all open popovers, optionally keeping one open. |
| `toggle` | `toggle(id: string)` | Toggles the popover open/closed. |
| `isOpen` | `isOpen(id: string): boolean` | Returns whether the popover is currently open. |

Legacy alias: `window.closePopover(id)` calls `close`.

## Usage

```templ
// Click-triggered popover with arrow
@popover.Trigger(popover.TriggerProps{
	For: "my-popover",
}) {
	<button class="px-4 py-2 bg-primary text-primary-foreground rounded-md">
		Open Popover
	</button>
}
@popover.Content(popover.ContentProps{
	ID:        "my-popover",
	Placement: popover.PlacementBottom,
	ShowArrow: true,
}) {
	<div class="p-4">
		<p class="font-medium">Popover Title</p>
		<p class="text-muted-foreground">This is the popover content.</p>
	</div>
}

// Hover-triggered popover with custom delays
@popover.Trigger(popover.TriggerProps{
	For:         "hover-pop",
	TriggerType: popover.TriggerTypeHover,
}) {
	<span class="underline cursor-help">Hover me</span>
}
@popover.Content(popover.ContentProps{
	ID:            "hover-pop",
	Placement:     popover.PlacementTop,
	ShowArrow:     true,
	HoverDelay:    200,
	HoverOutDelay: 300,
}) {
	<div class="p-3">Tooltip-like hover popover</div>
}
```
