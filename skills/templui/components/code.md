# Code

> A syntax-highlighted code block powered by highlight.js with automatic dark/light theme switching.

## Install

```bash
templui add code
```

Dependencies auto-installed: none

Add to your base layout `<head>`: `@code.Script()`

## Update

```bash
templui add code
```

To update all: `templui --installed add`

## API

### Enums

No enums.

### Props

```go
type Props struct {
	ID        string
	Class     string
	Attrs     templ.Attributes
	Language  string
	CodeClass string
}
```

## Components

| Function | Props | Description |
| -------- | ----- | ----------- |
| `Code(props ...Props)` | `Props` | Root wrapper `<div>` containing a `<pre>/<code>` block. Loads highlight.js and its light theme stylesheet. Accepts children as the code content to highlight. |
| `Script()` | — | Outputs the `<script>` tag for theme switching and auto-highlighting behavior. Auto-generated by `templui add`. Place in `<head>`. |

## Composition

Flat component — no sub-components.

`Code` renders a `<div>` > `<pre>` > `<code>` structure. The code content is passed as children.

## Dependencies

None — only uses `utils` package.

## Context

No context passing.

## Data Attributes

| Attribute | Element | Description |
| --------- | ------- | ----------- |
| `data-tui-code-component` | `Code` root `<div>` | Marks the root code component container. |
| `data-tui-code-block` | `<code>` | Marks the code element for highlight.js targeting and theme-aware auto-highlighting. |

## JavaScript Behavior

The bundled script (IIFE, no public API):

- Waits for `window.hljs` to become available, then highlights all `[data-tui-code-block]` elements.
- Switches the highlight.js theme stylesheet between `atom-one-light` and `atom-one-dark` based on the presence of the `dark` class on `<html>`.
- Observes DOM mutations (class changes and new nodes) to automatically highlight newly added code blocks and update the theme on dark-mode toggle.

## Usage

```templ
@code.Code(code.Props{Language: "go"}) {
  func main() &#123;
    fmt.Println("Hello, world!")
  &#125;
}
```
